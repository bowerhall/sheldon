# Traefik Dashboard - IP-restricted to Tailscale network
# Accessible via any host on /dashboard or /api paths
# Protected by Tailscale IP whitelist (100.64.0.0/10)

http:
  routers:
    dashboard:
      rule: "PathPrefix(`/dashboard`) || PathPrefix(`/api`)"
      entryPoints:
        - websecure
      service: api@internal
      tls:
        certResolver: letsencrypt
      middlewares:
        - tailscale-only
      priority: 1

  middlewares:
    tailscale-only:
      ipAllowList:
        sourceRange:
          - "100.64.0.0/10"
